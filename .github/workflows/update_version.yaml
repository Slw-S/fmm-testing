name: Replace String

on: [push]

jobs:
  replace-string:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2
      with:
        fetch-depth: 0  # Fetch all tags
   
    - name: Replace version number
      run: |
          ls
          sed -i 's/2025.01.28/2025.01.29/g' README.md
          sed -i 's/2025.01.28/2025.01.29/g' doc/conf.py
          sed -i 's/2025.01.28/2025.01.29/g' meson.build
          sed -i 's/2025.01.28/2025.01.29/g' pyproject.toml
          sed -i 's/2025.01.28/2025.01.29/g'  skfmm/__init__.py
      
    - name: Create branch and commit changes
      run: |
         git config --global user.name 'github-actions[bot]'
         git config --global user.email 'github-actions[bot]@users.noreply.github.com'
         git checkout master
         git add .
         git commit -m 'Update version'

    - name: Push changes
      run: git push origin master
